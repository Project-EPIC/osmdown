<div id="{{ id }}" style="width:50%;">
  <svg id="{{ id }}_date_chart" class="date-chart" style="width:1200px;"></svg>
</div>

<script type="text/javascript">

var {{ id }}_toPlot = [{
  'title': "Changesets Per Hour",
  'data': {{{ data }}}
}]

//Standard D3 Defaults for time data
var x = d3.time.scale().range([0, width]);
    y = d3.scale.linear().range([height, 0]);
    xAxis = d3.svg.axis().scale(x).orient("bottom").ticks(d3.time.hours, 8).tickFormat(d3.time.format('%m/%e, %I %p'));
    yAxis = d3.svg.axis().scale(y).orient("left");

x.domain(d3.extent({{ id }}_toPlot[0].data, function(d) { return parseDate(d.date); }));
y.domain(d3.extent({{ id }}_toPlot[0].data, function(d) { return d.value; }));

//Looking for a date to parse and a value to call for a height
var dateLine = d3.svg.line()
  .x(function(d) { return x(parseDate(d.date)) })
  .y(function(d) { return y(d.value)})

//Call the graphic
var width = {{ width }}
var {{id}}_dateChart = d3.select("#{{ id }}_date_chart")
   .attr("width", width + margin.left + margin.right)
   .attr("height", height + margin.top + margin.bottom)
   .append("g")
   .attr("transform", "translate(" + margin.left + "," + margin.top + ")")

//Add the x Axis
{{id}}_dateChart.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(5," + height + ")")
  .style("font-size","12px")
  .call(xAxis);

//Add the y Axis
{{id}}_dateChart.append("g")
  .attr("class", "y axis")
  .call(yAxis)
  .append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", 6)
  .attr("dy", ".71em")
  .style("text-anchor", "end")

{{ id }}_toPlot.forEach(function(line, index){
  {{id}}_dateChart.append("path")
    .datum(line.data)
    .attr("id", line.title)
    .attr("class", "line multiline_"+index)
    .attr("d", dateLine);
})

</script>
